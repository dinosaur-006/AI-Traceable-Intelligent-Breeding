<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI 滋补养生 - 您的专业健康管家</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@400;700&family=Inter:wght@400;600&display=swap" rel="stylesheet">
</head>
<body>
    <!-- Snow Container -->
    <div id="snowContainer" class="snow-container"></div>

    <!-- Navigation -->
    <nav class="navbar">
        <div class="nav-container">
            <div class="logo">
                <i class="fas fa-leaf"></i> 溯源智养
            </div>
            <div class="mobile-menu-btn" onclick="toggleMobileMenu()">
                <i class="fas fa-bars"></i>
            </div>
            <div class="nav-links">
                <a href="index.html" class="nav-link active">首页</a>
                <a href="assessment.html" class="nav-link">体质测评</a>
                <a href="plan.html" class="nav-link">滋补计划</a>
                <a href="advisor.html" class="nav-link">AI顾问</a>
                <a href="poster.html" class="nav-link">节气海报</a>
                <a href="recipes.html" class="nav-link">食谱生成</a>
                <a href="account.html" class="nav-link">个人中心</a>
            </div>
        </div>
    </nav>

    <!-- Mobile Drawer -->
    <div class="mobile-overlay" onclick="toggleMobileMenu()"></div>
    <div class="mobile-drawer">
        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 30px;">
            <div class="logo" style="font-size: 1.2rem;"><i class="fas fa-leaf"></i> 溯源智养</div>
            <div onclick="toggleMobileMenu()" style="font-size: 1.5rem; color: #666;"><i class="fas fa-times"></i></div>
        </div>
        <a href="index.html" class="nav-link active">首页</a>
        <a href="assessment.html" class="nav-link">体质测评</a>
        <a href="advisor.html" class="nav-link">AI顾问</a>
        <a href="poster.html" class="nav-link">节气海报</a>
        <a href="recipes.html" class="nav-link">食谱生成</a>
        <a href="account.html" class="nav-link">个人中心</a>
    </div>

    <!-- Main Container -->
    <main class="container">
        
        <!-- 1. Hero Section (Split Layout) -->
        <section class="hero-section animate-in">
            <!-- Left: Big Visual -->
            <div class="base-card hero-visual">
                <div class="term-circle" id="heroTermName">大雪</div>
                <h1 class="hero-title">顺时而养，<br>知行合一</h1>
                <div class="hero-subtitle">
                    <span>AI 体感指数</span>
                    <span class="star-rating">★★★☆</span>
                    <span style="margin: 0 10px;">|</span>
                    <span id="heroQuote">今日养生：驱寒护阳，早睡晚起</span>
                </div>
            </div>
            
            <!-- Right: Widgets -->
            <div class="hero-widgets">
                <div class="base-card widget-card delay-1">
                    <i class="fas fa-cloud-sun weather-icon"></i>
                    <div style="font-size: 2rem; font-weight: bold;" id="weatherTemp">5°C</div>
                    <div style="color: #666;" id="weatherCond">晴朗微风</div>
                    <div style="margin-top: 10px; font-size: 0.9rem; color: #999;">北京市 · 朝阳区</div>
                </div>
                <div class="base-card widget-card delay-2" style="justify-content: flex-start;">
                    <div style="font-weight: bold; margin-bottom: 10px; color: #333;">今日宜忌</div>
                    <div class="yi-ji-row">
                        <span class="tag-yi">宜 温补</span>
                        <span class="tag-yi">宜 藏阳</span>
                    </div>
                    <div class="yi-ji-row">
                        <span class="tag-ji">忌 生冷</span>
                        <span class="tag-ji">忌 熬夜</span>
                    </div>
                </div>
            </div>
        </section>

        <!-- 2. Core Functions (3 Cols) -->
        <section class="core-grid-3 animate-in delay-3">
            <!-- Card 1 -->
            <div class="base-card feature-card">
                <div>
                    <div class="feature-icon"><i class="fas fa-dna"></i></div>
                    <h3 style="margin: 0 0 10px 0; color: var(--text-main);">AI 体质检测</h3>
                    <p style="color: var(--text-secondary); font-size: 0.9rem; margin: 0;">基于中医理论的智能化体质辨识</p>
                </div>
                <button class="feature-btn" onclick="window.location.href='assessment.html'">开始测评 &rarr;</button>
            </div>
            <!-- Card 2 -->
            <div class="base-card feature-card">
                <div>
                    <div class="feature-icon"><i class="fas fa-robot"></i></div>
                    <h3 style="margin: 0 0 10px 0; color: var(--text-main);">AI 养生问答</h3>
                    <p style="color: var(--text-secondary); font-size: 0.9rem; margin: 0;">7x24小时您的专属健康顾问</p>
                </div>
                <button class="feature-btn" onclick="window.location.href='advisor.html'">我要提问 &rarr;</button>
            </div>
            <!-- Card 3 -->
            <div class="base-card feature-card">
                <div>
                    <div class="feature-icon"><i class="fas fa-image"></i></div>
                    <h3 style="margin: 0 0 10px 0; color: var(--text-main);">今日养生海报</h3>
                    <p style="color: var(--text-secondary); font-size: 0.9rem; margin: 0;">生成您的专属节气健康日签</p>
                </div>
                <button class="feature-btn" onclick="generatePoster()">一键生成 &rarr;</button>
            </div>
        </section>

        <!-- 3. Daily Guide (Content Flow) -->
        <section class="daily-section animate-in delay-4">
            <h2 class="section-title">今日指南</h2>
            <div class="content-flow">
                <!-- Tip Card -->
                <div class="base-card content-card">
                    <div class="content-thumb" style="background: #fff3e0; display: flex; align-items: center; justify-content: center;">
                        <i class="fas fa-lightbulb" style="color: #ffb74d; font-size: 1.5rem;"></i>
                    </div>
                    <div class="content-info">
                        <span class="content-tag">健康贴士</span>
                        <div class="content-text" id="dailyTipText">寒从脚下起，睡前泡脚胜吃补药。</div>
                    </div>
                </div>
                
                <!-- Drink Card -->
                <div class="base-card content-card">
                    <div class="content-thumb" style="background: #e1bee7; display: flex; align-items: center; justify-content: center;">
                        <i class="fas fa-mug-hot" style="color: #8e24aa; font-size: 1.5rem;"></i>
                    </div>
                    <div class="content-info">
                        <span class="content-tag">今日茶饮</span>
                        <div class="content-text" id="dailyDrinkName">陈皮普洱</div>
                        <div style="font-size: 0.85rem; color: #999;">理气健脾，消食化痰</div>
                    </div>
                </div>
            </div>
        </section>

        <!-- 4. Personalized Section -->
        <section id="personalizedSection" class="personalized-section animate-in delay-4" style="display: none;">
            <div class="personalized-header">
                <h2 style="margin: 0; font-family: var(--font-serif);">基于您的体质 · 今日专属</h2>
                <button class="feature-btn" style="border-color: white; color: white; margin: 0;" onclick="window.location.href='account.html'">查看完整方案 &rarr;</button>
            </div>
            <div class="personalized-grid">
                <div class="personal-item">
                    <div style="font-size: 0.9rem; opacity: 0.8; margin-bottom: 5px;">推荐饮食</div>
                    <div style="font-weight: bold; font-size: 1.1rem; margin-bottom: 5px;">姜枣茶</div>
                    <div style="font-size: 0.85rem; opacity: 0.9;">温中散寒，补血益气</div>
                </div>
                <div class="personal-item">
                    <div style="font-size: 0.9rem; opacity: 0.8; margin-bottom: 5px;">推荐习惯</div>
                    <div style="font-weight: bold; font-size: 1.1rem; margin-bottom: 5px;">晒背 20分钟</div>
                    <div style="font-size: 0.85rem; opacity: 0.9;">正午阳光最好，补充阳气</div>
                </div>
                <div class="personal-item">
                    <div style="font-size: 0.9rem; opacity: 0.8; margin-bottom: 5px;">推荐运动</div>
                    <div style="font-weight: bold; font-size: 1.1rem; margin-bottom: 5px;">八段锦</div>
                    <div style="font-size: 0.85rem; opacity: 0.9;">调理气血，强身健体</div>
                </div>
            </div>
        </section>
        
        <!-- Fallback for Personalized (If not logged in/no data) -->
        <section id="promoSection" class="base-card animate-in delay-4" style="padding: 40px; text-align: center; margin-bottom: 60px; display: none;">
            <h2 style="font-family: var(--font-serif); color: var(--primary-color); margin-bottom: 10px;">千人千方，精准养生</h2>
            <p style="color: var(--text-secondary); margin-bottom: 20px;">完成体质测评，解锁您的专属每日健康方案</p>
            <button class="btn-primary" onclick="window.location.href='assessment.html'">立即解锁专属方案</button>
        </section>

    </main>

    <!-- Professional Footer -->
    <footer class="site-footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-brand">
                    <h3><i class="fas fa-leaf"></i> 溯源智养</h3>
                    <p>结合传统中医智慧与现代 AI 技术，为您提供科学、个性化的健康生活指导。本项目致力于弘扬传统文化，倡导健康生活方式。</p>
                </div>
                <div class="footer-col">
                    <h4>功能导航</h4>
                    <a href="assessment.html">AI 体质测评</a>
                    <a href="advisor.html">智能健康顾问</a>
                    <a href="poster.html">节气海报生成</a>
                </div>
                <div class="footer-col">
                    <h4>关于我们</h4>
                    <a href="#">项目介绍</a>
                    <a href="#">AI 模型说明</a>
                    <a href="#">数据来源声明</a>
                    <a href="account.html">隐私政策</a>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2023-2024 溯源智养 AI Health Project. All Rights Reserved.</p>
                <p style="font-size: 0.8rem; margin-top: 5px;">免责声明：本平台提供的建议仅供参考，不作为医疗诊断依据。如有身体不适，请及时就医。</p>
            </div>
        </div>
    </footer>

    <script>
    // Core Logic
    document.addEventListener('DOMContentLoaded', () => {
        initSnow();
        updateWeather();
        loadDailyData();
        checkPersonalization();
    });

    // 1. Snow Effect
    function initSnow() {
        const container = document.getElementById('snowContainer');
        if(!container) return;
        for (let i = 0; i < 30; i++) {
            const snowflake = document.createElement('div');
            snowflake.classList.add('snowflake');
            snowflake.style.width = Math.random() * 5 + 2 + 'px';
            snowflake.style.height = snowflake.style.width;
            snowflake.style.left = Math.random() * 100 + 'vw';
            snowflake.style.animationDuration = Math.random() * 10 + 10 + 's';
            snowflake.style.animationDelay = Math.random() * 5 + 's';
            container.appendChild(snowflake);
        }
    }

    // 2. Mock Weather & Data
    function updateWeather() {
        // Simulate fetching weather
        const weathers = [
            { temp: "2°C", cond: "多云转晴" },
            { temp: "-1°C", cond: "小雪" },
            { temp: "5°C", cond: "晴朗" }
        ];
        const w = weathers[Math.floor(Math.random() * weathers.length)];
        document.getElementById('weatherTemp').textContent = w.temp;
        document.getElementById('weatherCond').textContent = w.cond;
    }

    function loadDailyData() {
        const ings = ["红薯", "羊肉", "白萝卜", "山药"];
        const tips = [
            "今日大雪，宜温补，忌生冷。", 
            "出门记得戴围巾，保护颈部受寒。", 
            "睡前泡脚20分钟，胜吃补药。",
            "冬日晒背，补充阳气正当时。"
        ];
        const drinks = ["姜枣茶", "陈皮普洱", "桂圆红枣茶"];

        // document.getElementById('dailyIngName').textContent = ings[Math.floor(Math.random() * ings.length)];
        document.getElementById('dailyTipText').textContent = tips[Math.floor(Math.random() * tips.length)];
        document.getElementById('dailyDrinkName').textContent = drinks[Math.floor(Math.random() * drinks.length)];
    }

    // 3. Personalization Check
    function checkPersonalization() {
        const personalizedSection = document.getElementById('personalizedSection');
        const promoSection = document.getElementById('promoSection');
        
        // Check if user has assessment data (mock logic)
        // In a real app, we check localStorage.getItem('ai_health_constitution')
        const hasData = localStorage.getItem('ai_health_constitution') || localStorage.getItem('ai_health_user');
        
        if (hasData) {
            personalizedSection.style.display = 'block';
            promoSection.style.display = 'none';
        } else {
            personalizedSection.style.display = 'none';
            promoSection.style.display = 'block';
        }
    }

    // 4. Actions
    function toggleMobileMenu() {
        document.querySelector('.mobile-drawer').classList.toggle('active');
        document.querySelector('.mobile-overlay').classList.toggle('active');
    }

    function generatePoster() {
        // Add simple loading effect to button content
        const btn = event.currentTarget;
        const originalText = btn.innerHTML;
        btn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> 生成中...';
        btn.style.opacity = '0.8';
        
        setTimeout(() => {
            window.location.href = 'poster.html?auto_generate=true';
        }, 1000);
    }
    </script>
</body>
</html>